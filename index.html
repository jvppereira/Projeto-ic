<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=">
	<title></title>
	<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	<style type="text/css">

	body{
		overflow-x: hidden;
		padding: 0;
		margin: 0;
		font-family: 'Arial', sans-serif;

		box-sizing: border-box;
	}

		.loginbtn{
         text-align: center;
         width: 100%;
         max-width: 150px;
         padding: 15px;
         padding-top:0px;
         height: 30px;
         color: white;
         border: 1px solid white;
         border-radius: 12px;
         background-color: skyblue;
         margin: 0 auto;
         margin-top: 40px;
         cursor: pointer;
  }

  .botoes{
  	display: flex;
  	width: 100%;
  	max-width: 400px;
  	margin: 0 auto;
  	margin-bottom: 40px;
  }



  .container{
  	
  	width: 100%;
  	height: 100%;
  	max-width: 1980px;
  	height: 850px;
  	display: flex;
  	background-color: red;
  }

  .containerdash{

	text-align: center;
  	width: 100%;
	margin: 0 auto;
	
  	background-color: rgb(255, 255, 255);
  	height: 100%;

  }

.menucima{
	
	width: 100%;
	height: 110px;
	display: flex;
	padding-bottom: 10px;
	background-color: #070927;
}
.contsingle{
	

	padding-left: 30px;	
	margin: 0 auto;
	padding: 20px;
	width: 30%;
	
}
.user{
	padding-left: 50%;
	position: relative;

	display: flex;
	width: 100%;
	max-width: 200px;
}
.nome{
	
	width: 100px;
	color: rgba(255, 247, 247, 0.855);
}
.titulo{
	color: rgb(255, 255, 255);
	text-align: center;
}
.titulo p{
	font-size: 25px;
}
.logo{
	position: relative;
	
	left: 10px;
	width: 100%;
	border-radius: 10px;
	height: 70px;
}
.logo img{
	background-color: rgba(255, 255, 255, 0.711);
	border-radius: 10px;
	width: 100px;
	padding: 10px;
	height: 100%;
}


.foto{

	width: 50px;
	border-radius: 10px;
	height: 40px;
}
.foto img{
	position: relative;
	top: 5px;
	cursor: pointer;
	border-radius: 100%;
	width: 90%;
	height: 100%;
}

.menulateral{
	overflow-x: auto;
	background-color: #070927;
	width: 20%;
  	height: 100%;
	max-height: 1050px;
  	width: 300px;
  	
}

.lsitaitems{

	margin-top: 0px;
	text-align: center;
}
.item{

	cursor: pointer;
		padding: 10px;
		border-bottom: 1px solid rgba(255, 255, 255, 0.555);;
	color: rgba(255, 255, 255, 0.555);
	transition: .3s;
}

.item:hover{
color: #0a0d39;
	background-color:	rgba(255, 255, 255, 0.555);
}
.bgL3{
     
         position: fixed;
         top: 0;
         left: 0;
         width: 100%;
         height: 100%;
         background-color: rgba(0, 0, 0, 0.5); /* Fundo escuro semi-transparente */
         justify-content: center;
         align-items: center;
}
.bgconteudolog{

width: 340px;
height: 100%;
max-height: 320px;
margin: 50px auto;
background-color: #fff;
padding: 20px;
overflow-x: hidden;
border-radius: 8px;
box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);

}
.bgcontentt{
   width: 100%;
   height: 100%;
     overflow: auto;
}
.bgcontentt h1{
	font-size: 20px;
  text-align: center;
  color: #095a2d;
  font-weight: 200;
}

.loginbtn{
         text-align: center;
         width: 100%;
         max-width: 150px;
         padding: 15px;
         padding-top:0px;
         height: 30px;
         color: white;
         border: 1px solid white;
         border-radius: 12px;
         background-color: #095a2d;
         margin: 0 auto;
         margin-top: 80px;
         cursor: pointer;
  }
  
  input {
         padding: 10px;
         margin-bottom: 10px;
         border: 1px solid #ccc;
         border-radius: 5px;
         font-size: 14px;
         box-sizing: border-box;
         width: 100%;
      }


	  .painelmodelo{
		width: 100%;
	  }
		.opcoes{
			min-height: 50px;
			width: 100%;
            margin: 20px auto;
            padding: 10px;
            max-width: 1200px;
            display: flex;
            border-radius: 10px;
            background-color: rgba(170, 173, 178, 0.426);
			-webkit-box-shadow: 0px 9px 33px 7px rgba(0,0,0,0.35);
-moz-box-shadow: 0px 9px 33px 7px rgba(0,0,0,0.35);
box-shadow: 0px 9px 33px 7px rgba(0,0,0,0.35);
		}
	
		.categorias{
			display: flex;
			width: 50%;
			padding: 5px;
		}

	  .categoriasingle{
		width: 25%;
		padding: 2px;
	  }

	  select{
		border-radius: 5px;
		padding: 2px;
		position: relative;
		top:20px;
	  }

	  /*
	              margin: 0 auto;
            width: 10%;
            padding: 10px;
            border-radius: 15px;
            background-color: rgba(255, 255, 255, 0.426);
            color: rgb(12, 36, 175);
            text-align: center;
            cursor: pointer;
            transition: .2s;
            border: none;*/

		.botaoatualiza{
			margin-top: 15px;
			margin-right: 10px;
			font-size: 15px;
			text-align: center;
			padding: 10px;
			border-radius: 10px;
			color: white;
			cursor: pointer;
			transition: .3s;
			width: 180px;
			height: 30px;
			padding-top: 20px;
			background-color: rgb(15, 39, 61);
		}
		.botaoatualiza:hover{
			color: rgb(15, 39, 61);

			background-color: white;
		}



		.indicadores{
			min-height: 50px;
			width: 100%;
            margin: 20px auto;
            padding: 10px;
            max-width: 1200px;
            display: flex;
			text-align: center;
       
		}
		.indicadorsingle{
			background-color: #11607274;
			border-radius: 10px;
			width: 22%;
			padding: 5px;
			margin: 0 auto;
			color: white;
			
		}



.variaveis{
	position: relative;
	left: -100px;
	display: flex;
	width: 40%;
}

.singlevari{
	width: 30%;
	display: flex;
	margin-left: 20px;
}

.input{

}
.input input{
	padding: 5px;
	position: relative;
	top: -10px;
}

.titulovari{
	position: relative;
	top: -10px;
}

.btnmais{
	position: relative;
	top: 33px;
	width: 50px;
	height: 20px;
	color: white;
	font-size: 20px;
	text-align: center;
	margin-left: 5px;
	border-radius: 5px;
	background-color: rgb(15, 39, 61);
}

.btnmenos{
	position: relative;
	top: 33px;
	width: 50px;
	height: 20px;
	color: white;
	font-size: 20px;
	text-align: center;
	margin-left: 5px;
	border-radius: 5px;
	background-color: rgb(15, 39, 61);
}

.grafico{
	margin: 0 auto;
	text-align: center;
	width: 100%;
	max-height: 530px;
	
}


 canvas{
	margin-left: 100px;
	text-align: center;
	width: 100%;
	height: 100%;
}
	</style>
</head>
<body>




























<div id="paglogin">

	<div id="cadastroid" class="bgL3">
  
		<div class="bgconteudolog">
	 
			  <div class="bgcontentt">

					<h1>Relizar login para acessar painel</h1>

					<input type="text" id="nomeuser" placeholder="Nome: ">
					<input type="text" id="senhauserc" placeholder="Senha: ">
	 
			<div class="loginbtn" onclick="login()">
				  <p>Login</p>
			   </div>
			
			  </div>
			
	 
			
		</div>
	 </div>

</div>















<div id="pag1" style="display: none;">

<div class="menucima">



	<div class="contsingle">
	<div class="logo">
		<img src="ufpr.png"/>
	</div>
</div>




<div class="contsingle">
	<div class="titulo">
		<p>Painel </p>
	</div>
</div>



	<div class="contsingle">
	<div class="user" style="position: relative;">

		<div class="nome">
			<p id="user"></p>
		</div>
	
		<div class="foto">
			<img src="user.webp"/>
		</div>
	
	</div>
</div>

</div>






<div class="container">

<div class="menulateral">

<div class="lsitaitems">



		<div class="item" id="id1" onclick="abrirselect(this.id)" style="border-top: 1px solid  rgba(255, 255, 255, 0.555);">
			
			<p>Análise de previsões modelo</p>

		</div>


		<div class="item" id="id2" onclick="abrirselect(this.id)" >
			
			<p>Treinar modelo</p>
	
		</div>


		<div class="item" id="id3" onclick="abrirselect(this.id)">
			<p>Análise do dataset</p>
		</div>


		<div class="item" id="id4" onclick="abrirselect(this.id)">
			<p>Atualizar Dataset</p>

		</div>




<div class="item" id="id5" onclick="abrirselect(this.id)">
			
	<p>Configurações</p>

</div>


		<div class="item" onclick="sair()" style="border-bottom: none;">
			<p>Sair</p>
		</div>
	</div>

</div>














	<div class="containerdash">







		<div class="painelmodelo"  id="id1c">

			<div class="opcoes">

				<div class="categorias">

					<div class="categoriasingle">
						<select>
							<option value="opcao1">Cidade</option>
							<option value="opcao2">Opcao 2</option>
							<option value="opcao3">Opcao 3</option>
						</select>
					</div>


					<div class="categoriasingle">
						<select>
							<option value="opcao1">Local de fabricacao</option>
							<option value="opcao2">Opcao 2</option>
							<option value="opcao3">Opcao 3</option>
						</select>
					</div>


					<div class="categoriasingle">
						<select>
							<option value="opcao1">Tipo</option>
							<option value="opcao2">Opcao 2</option>
							<option value="opcao3">Opcao 3</option>
						</select>
					</div>


				</div>

				<div class="variaveis">

					<div class="singlevari">

					
						<div class="titulovari">

							<p>Variavel1</p>

							<div class="input">
								<input type="text">
							</div>
						</div>


						<div class="btnmais">+</div>
						<div class="btnmenos">-</div>
					</div>

					<div class="singlevari">

					
						<div class="titulovari">

							<p>Variavel1</p>

							<div class="input">
								<input type="text">
							</div>
						</div>


						<div class="btnmais">+</div>
						<div class="btnmenos">-</div>
					</div>


					<div class="singlevari">

					
						<div class="titulovari">

							<p>Variavel1</p>

							<div class="input">
								<input type="text">
							</div>
						</div>


						<div class="btnmais">+</div>
						<div class="btnmenos">-</div>
					</div>


				</div>

				<div class="botaoatualiza">
					Relizar nova previsao
				</div>

			</div> <!--opcoes-->




			<div class="indicadores">

				<div class="indicadorsingle">
					<p>Mês mais rentavel: Maio</p>
				</div>

				
				<div class="indicadorsingle">
					<p>Total acumulado no ano: 201.945 R$</p>
				</div>

				
				<div class="indicadorsingle">
					<p>Variação mês a mês no ano: 15%</p>
				</div>

				
				<div class="indicadorsingle">
					<p>Variação ano anterior: 2%</p>
				</div>

				

			</div>



<!--
			<iframe title="bitcoin" width="1140" height="541.25" src="https://app.powerbi.com/reportEmbed?reportId=562186ff-d040-4a15-84c9-49a0d8378024&autoAuth=true&ctid=e639878c-010f-442a-9926-86151f075ba0" frameborder="0" allowFullScreen="true"></iframe>
-->


<div class="grafico">

	<canvas id="meuGrafico"></canvas>

</div>








		</div><!--painelmodelo-->


		
		<div style="display: none;" class="dataset"  id="id2c">

			<div class="opcoes">

				<div></div>

			</div>


		</div><!--dataset-->





		<div style="display: none;" class="dataset"  id="id3c">

			<div class="opcoes">

				<div></div>

			</div>


		</div><!--dataset-->





		<div style="display: none;" class="dataset"  id="id4c">

			<div class="opcoes">

				<div>dasad</div>

			</div>


		</div><!--dataset-->



		<div style="display: none;" class="dataset"  id="id5c">

			<div class="opcoes">

				<div>5555</div>

			</div>


		</div><!--dataset-->




	</div><!--containerdash-->


	</div><!--container-->





</div>





















<script type="text/javascript">

var usuario = ""

function login(){	

	var bgllogin = document.getElementById('pag1');
      bgllogin.style.display = "initial"
   var cadastro = document.getElementById('paglogin');
      cadastro.style.display = "none"


	  usuario = document.getElementById('nomeuser').value

	  var meuParagrafo = document.getElementById('user');
	  meuParagrafo.textContent = "Usuário: " + usuario;

}

function sair(){
	var bgllogin = document.getElementById('paglogin');
      bgllogin.style.display = "initial"
   var cadastro = document.getElementById('pag1');
      cadastro.style.display = "none"
}



function abrirselect(id){
	ids = ['id1c','id2c','id3c','id4c','id5c',]
	//console.log(id)
	id = id + "c"

	for(let i = 0; i < ids.length;i++){
		if (id != ids[i]){
			if(id == 'id3c'){
				updata()
			}
			//console.log(id, ids[i])
			var selecte = document.getElementById(`${ids[i]}`);
    		selecte.style.display = "none"
		}
	}

	var select = document.getElementById(`${id}`);
    select.style.display = "initial"

}


function previsoes(){
	var dados = getdata()
	setTimeout(() => {
		carregargrafico(dados)
	}, "");
	
}


function getdata(){

	fetch(`http://127.0.0.1:5000/api/query_result/${queryType}`)
                .then(response => response.json())
                .then(data => {
					return data
                })
                .catch(error => console.error('Erro:', error));
}

carregargrafico('s')

function carregargrafico(datap){
	    // Obtenha o contexto do canvas
		var ctx = document.getElementById('meuGrafico').getContext('2d');

// Configure seus dados
var data = {
	labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'junho', 'julho', 'agosto', 'setembro', 'outurbo', 'novembro', 'dezembro'],
	datasets: [{
		label: 'Preço do petróleo',
		data: [10345, 20234, 15655, 25432, 30987,10543, 20543, 1544, 2543, 30543, 1033, 202],
		backgroundColor: 'rgba(75, 192, 192, 0.2)',
		borderColor: 'rgba(75, 192, 192, 1)',
		borderWidth: 1
	}]
};

// Configure as opções do gráfico
var options = {
	scales: {
		y: {
			beginAtZero: true
		}
	}
};

// Crie um gráfico de barra
var meuGrafico = new Chart(ctx, {
	type: 'line',
	data: data,
	options: options
});


}














//tabela

var valueatual = 'buscar_OSs'
var queryType = 'buscar_OSs'

//setInterval(updata, 3000);

function updata() {
            console.log(valueatual)
            buscarQuery(valueatual)
        }

        function buscarQuery() {
            valueatual = queryType
     
            fetch(`http://127.0.0.1:5000/api/query_result/${queryType}`)
                .then(response => response.json())
                .then(data => {
                    // Limpar o conteúdo atual da tabela
                    clearTable();
                    console.log('tabela atualizada')
                    // Obter a tabela
                    var tabela = document.querySelector('table');
                    
                    // Preencher o cabeçalho (thead)
                    var thead = tabela.querySelector('thead tr');
                    Object.keys(data[0]).forEach(chave => {
                        var th = document.createElement('th');
                        th.textContent = chave;
                        thead.appendChild(th);
                    });
    
                    // Preencher o corpo da tabela (tbody)
                    var tbody = tabela.querySelector('tbody');
                    data.forEach(item => {
                        var tr = document.createElement('tr');
                        Object.values(item).forEach(valor => {
                            var td = document.createElement('td');
                            td.textContent = valor;
                            tr.appendChild(td);
                        });
                        tbody.appendChild(tr);
                    });
                })
                .catch(error => console.error('Erro:', error));
        }
    
        function clearTable() {
            var tabela = document.querySelector('table');
            tabela.querySelector('thead tr').innerHTML = '';
            tabela.querySelector('tbody').innerHTML = '';
        }



</script>
</body>
</html>